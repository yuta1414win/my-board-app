# 画面仕様書

## 1. 画面構成概要

オープン掲示板システムは以下の画面で構成されています：

1. **ホーム画面** (`/`) - ランディングページ
2. **掲示板画面** (`/board`) - メイン機能画面

## 2. 画面詳細仕様

### 2.1 ホーム画面 (`/`)

#### 2.1.1 画面概要
- **ファイル**: `src/app/page.tsx`
- **目的**: アプリケーションの紹介とナビゲーション
- **アクセス方法**: ブラウザで直接アクセス、掲示板からの戻り

#### 2.1.2 画面レイアウト

```
+--------------------------------------------------+
|                     ヘッダー                     |
|            オープン掲示板へようこそ              |
+--------------------------------------------------+
|                   メインコンテンツ               |
|  　　　　　　　システムの説明文                   |
|                                                  |
|               [掲示板を開く]                     |
+--------------------------------------------------+
|                    フッター                      |
|        [学習する] [サンプル] [nextjs.org へ →]  |
+--------------------------------------------------+
```

#### 2.1.3 表示要素

| 要素 | 内容 | スタイル |
|------|------|----------|
| タイトル | "オープン掲示板へようこそ" | h1, 4xl, font-bold |
| 説明文 | システムの概要説明（200文字制限について） | p, lg, text-center |
| 掲示板ボタン | "掲示板を開く" | ボタン, primary, `/board`へのリンク |
| フッターリンク | 外部リンク3つ | 小さなアイコン付きリンク |

#### 2.1.4 レスポンシブ対応
- **モバイル**: シングルカラム、余白調整
- **タブレット**: 中央寄せレイアウト
- **デスクトップ**: 最大幅制限、センタリング

#### 2.1.5 アクション
- **掲示板ボタンクリック**: `/board`に遷移
- **フッターリンククリック**: 外部サイトを新しいタブで開く

---

### 2.2 掲示板画面 (`/board`)

#### 2.2.1 画面概要
- **ファイル**: `src/app/board/page.js`
- **目的**: 投稿の閲覧、作成、編集、削除
- **アクセス方法**: ホーム画面からのナビゲーション、直接URL

#### 2.2.2 画面レイアウト

```
+--------------------------------------------------+
|                オープン掲示板                    |
+--------------------------------------------------+
|                 新規投稿フォーム                 |
|  +--------------------------------------------+  |
|  | タイトル: [________________] (nn/50文字)   |  |
|  | 本文:     [________________] (nn/200文字)  |  |
|  |          [________________]                |  |
|  |          [________________]                |  |
|  |                [投稿する]                  |  |
|  +--------------------------------------------+  |
+--------------------------------------------------+
|                  投稿一覧                        |
|  +--------------------------------------------+  |
|  | タイトル                        [編集][削除] |  |
|  | 本文内容...                                |  |
|  | 2024/01/01 12:00                          |  |
|  +--------------------------------------------+  |
|  | タイトル                        [編集][削除] |  |
|  | 本文内容...                                |  |
|  | 2024/01/01 11:30 (編集済み)               |  |
|  +--------------------------------------------+  |
+--------------------------------------------------+
```

#### 2.2.3 表示要素詳細

##### ヘッダー部
| 要素 | 内容 | 実装 |
|------|------|------|
| タイトル | "オープン掲示板" | Typography variant="h4" |

##### 新規投稿フォーム
| 要素 | 内容 | 実装 | バリデーション |
|------|------|------|----------------|
| タイトル入力 | テキストフィールド | TextField, fullWidth | 必須、50文字以内 |
| 本文入力 | マルチラインテキスト | TextField, multiline, rows=3 | 必須、200文字以内 |
| 文字数表示 | リアルタイム文字数 | helperText | 動的更新 |
| 投稿ボタン | 送信ボタン | Button, variant="contained" | 条件付き有効化 |
| エラー表示 | バリデーションエラー | Alert severity="error" | 条件付き表示 |

##### 投稿一覧
| 要素 | 内容 | 実装 | 機能 |
|------|------|------|------|
| 投稿カード | 各投稿の表示 | Card, CardContent | ホバーエフェクト |
| タイトル | 投稿タイトル | Typography variant="h6" | 長文対応 |
| 本文 | 投稿本文 | Typography variant="body1" | 改行保持 |
| 投稿日時 | 作成/更新日時 | Typography variant="caption" | 日本語フォーマット |
| 編集ボタン | アイコンボタン | IconButton, EditIcon | モーダル表示 |
| 削除ボタン | アイコンボタン | IconButton, DeleteIcon | 確認ダイアログ |

#### 2.2.4 編集モーダル

##### 表示タイミング
- 投稿カードの編集ボタンクリック時

##### モーダル構成
```
+--------------------------------------------------+
|                  投稿を編集                      |
+--------------------------------------------------+
|  タイトル: [既存タイトル____] (nn/50文字)       |
|  本文:     [既存本文______] (nn/200文字)        |
|           [______________]                       |
|           [______________]                       |
|                                                  |
|               [キャンセル] [保存]                |
+--------------------------------------------------+
```

| 要素 | 実装 | 機能 |
|------|------|------|
| ダイアログ | Dialog, maxWidth="sm", fullWidth | モーダル表示 |
| タイトル入力 | TextField, 既存値セット | リアルタイム検証 |
| 本文入力 | TextField, multiline, 既存値セット | リアルタイム検証 |
| キャンセルボタン | Button | モーダル閉じる、変更破棄 |
| 保存ボタン | Button, variant="contained" | 条件付き有効化、更新実行 |

#### 2.2.5 インタラクション仕様

##### 新規投稿フロー
1. ユーザーがタイトルと本文を入力
2. リアルタイムで文字数カウント表示
3. バリデーションエラーがあれば即座に表示
4. 投稿ボタンは有効な入力時のみ有効化
5. 投稿成功時はフォームクリア、一覧更新

##### 編集フロー
1. 編集ボタンクリック → モーダル表示
2. 既存データでフォーム初期化
3. 編集内容のリアルタイム検証
4. 保存時は確認なしで更新実行
5. 成功時はモーダル閉じ、一覧更新

##### 削除フロー
1. 削除ボタンクリック → 確認ダイアログ表示
2. "本当に削除しますか？" の確認
3. OK時は即座に削除実行
4. 成功時は一覧から除去

#### 2.2.6 エラーハンドリング

##### 表示されるエラーメッセージ
| 状況 | エラーメッセージ |
|------|------------------|
| タイトル未入力 | "タイトルを入力してください" |
| タイトル文字数超過 | "タイトルは50文字以内にしてください" |
| 本文未入力 | "本文を入力してください" |
| 本文文字数超過 | "本文は200文字以内にしてください" |
| 投稿失敗 | "投稿に失敗しました" |
| 取得失敗 | "投稿の取得に失敗しました" |
| 更新失敗 | "更新に失敗しました" |
| 削除失敗 | "削除に失敗しました" |

#### 2.2.7 ローディング状態

##### 初期ローディング
- **表示**: CircularProgress（中央配置）
- **タイミング**: 投稿一覧取得中
- **解除条件**: データ取得完了またはエラー

##### 操作中ローディング
- **投稿ボタン**: disabled状態（視覚的フィードバック）
- **編集保存**: disabled状態
- **削除操作**: 即座に実行（別途ローディング表示なし）

#### 2.2.8 レスポンシブ対応

##### モバイル（〜768px）
- Container: maxWidth="md", 横padding減少
- Typography: フォントサイズ調整
- 編集・削除ボタン: 縦並び配置
- フォーム: フルWidth、余白最小化

##### タブレット（768px〜1024px）
- Container: 適度な横余白
- カード: ホバーエフェクト維持
- ボタン: 横並び配置

##### デスクトップ（1024px〜）
- Container: maxWidth="md"で幅制限
- 最適な読みやすさを重視したレイアウト
- すべてのインタラクション有効

#### 2.2.9 アクセシビリティ対応

##### キーボードナビゲーション
- Tab順序: タイトル → 本文 → 投稿ボタン → 各投稿の編集 → 削除
- Enter/Space: ボタン操作
- Escape: モーダル閉じる

##### スクリーンリーダー対応
- form要素の適切なラベリング
- エラーメッセージのaria-live
- アイコンボタンのaria-label
- モーダルのaria-labelledby

##### 色・コントラスト
- Material-UIのデフォルトカラーパレット使用
- エラー表示は十分なコントラスト確保
- ホバー・フォーカス状態の視覚的区別

## 3. 状態管理

### 3.1 ローカル状態（useState）

| 状態名 | 型 | 初期値 | 用途 |
|--------|----|----|------|
| posts | Array | [] | 投稿一覧データ |
| title | String | '' | 新規投稿タイトル |
| content | String | '' | 新規投稿本文 |
| editingPost | Object\|null | null | 編集中の投稿データ |
| editTitle | String | '' | 編集中タイトル |
| editContent | String | '' | 編集中本文 |
| error | String | '' | エラーメッセージ |
| loading | Boolean | true | ローディング状態 |
| openEditDialog | Boolean | false | 編集モーダル表示状態 |

### 3.2 状態更新パターン

##### データ取得時
```javascript
setLoading(true) → APIコール → setPosts(data) → setLoading(false)
```

##### エラー発生時
```javascript
setError('') → 操作実行 → setError(errorMessage)
```

##### フォームリセット時
```javascript
setTitle('') → setContent('') → setError('')
```

## 4. パフォーマンス考慮事項

### 4.1 最適化実装
- useMemo: 日付フォーマット関数（実装なし、将来検討）
- useCallback: イベントハンドラー（実装なし、現状不要）
- React.memo: コンポーネント分割時（現状は単一コンポーネント）

### 4.2 将来の改善点
- 投稿一覧の仮想化（大量データ対応）
- 画像の遅延読み込み
- 楽観的UI更新
- キャッシュ戦略の実装