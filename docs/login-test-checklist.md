# ログイン機能 手動テストチェックリスト

## 📝 テスト実施情報
- **テスト実施日**: ___________
- **テスト実施者**: ___________
- **テスト環境**: http://localhost:3001
- **ブラウザ**: ___________

## 🔧 事前準備

### 環境セットアップ
- [ ] MongoDBが起動している
- [ ] 開発サーバーが起動している (`npm run dev`)
- [ ] テストユーザーが作成されている (`node scripts/create-test-users.js`)
- [ ] ブラウザのクッキーをクリアした
- [ ] ブラウザの開発者ツールを開いている（コンソールエラー確認用）

### テストアカウント情報
```
【正常ログイン用】
メール: test-verified@example.com
パスワード: TestPassword123!

【メール未認証用】
メール: test-unverified@example.com
パスワード: TestPassword123!

【管理者用】
メール: admin@example.com
パスワード: AdminPassword123!
```

---

## ✅ テスト項目

### 1️⃣ ログインページ表示確認

#### アクセス方法
- [ ] ホームページのヘッダーから「ログイン」ボタンでアクセス可能
- [ ] 直接URL (`/auth/login`) でアクセス可能
- [ ] 保護されたページからリダイレクトでアクセス可能

#### UI要素確認
- [ ] メールアドレス入力フィールドが表示される
- [ ] パスワード入力フィールドが表示される
- [ ] パスワード表示/非表示トグルボタンが動作する
- [ ] ログインボタンが表示される
- [ ] Googleログインボタンが表示される
- [ ] GitHubログインボタンが表示される
- [ ] 新規登録リンクが表示される
- [ ] ホームに戻るリンクが表示される

---

### 2️⃣ フォームバリデーション

#### 空フィールド
- [ ] メールアドレス未入力でログインボタンが無効化される
- [ ] パスワード未入力でログインボタンが無効化される
- [ ] 両方未入力でログインボタンが無効化される

#### 入力フォーマット
- [ ] 不正なメール形式でエラーが表示される
- [ ] 入力中にエラーメッセージがクリアされる

---

### 3️⃣ 正常ログインフロー

**テストアカウント**: test-verified@example.com / TestPassword123!

- [ ] 正しい認証情報でログインできる
- [ ] ログイン中は「ログイン中...」が表示される
- [ ] ログイン成功後 `/board` にリダイレクトされる
- [ ] ヘッダーにユーザー名が表示される
- [ ] ヘッダーのログインボタンが消える
- [ ] ユーザーアイコン/ドロップダウンが表示される
- [ ] コンソールにエラーが出ていない

---

### 4️⃣ エラーケース

#### 間違ったパスワード
**テスト**: test-verified@example.com / WrongPassword

- [ ] エラーメッセージが表示される
- [ ] エラー内容:「メールアドレスまたはパスワードが正しくありません。」
- [ ] ページがリダイレクトされない
- [ ] メールアドレスの入力値が保持される
- [ ] パスワードフィールドがクリアされる
- [ ] 再度ログインを試行できる

#### 存在しないユーザー
**テスト**: nonexistent@example.com / AnyPassword123!

- [ ] エラーメッセージが表示される
- [ ] エラー内容:「メールアドレスまたはパスワードが正しくありません。」
- [ ] ページがリダイレクトされない

#### メール未認証ユーザー
**テスト**: test-unverified@example.com / TestPassword123!

- [ ] エラーメッセージが表示される
- [ ] エラー内容:「メールアドレスが確認されていません。確認メールをご確認ください。」
- [ ] ログインが拒否される

---

### 5️⃣ ログアウト機能

#### ドロップダウンメニュー
- [ ] ユーザーアイコンクリックでメニューが開く
- [ ] メニューにメールアドレスが表示される
- [ ] 「プロフィール」メニュー項目が表示される
- [ ] 「設定」メニュー項目が表示される
- [ ] 「ログアウト」メニュー項目が表示される
- [ ] メニュー外クリックで閉じる

#### ログアウト処理
- [ ] ログアウトをクリックできる
- [ ] ホームページ（`/`）にリダイレクトされる
- [ ] ヘッダーがログアウト状態に変わる
- [ ] ログインボタンが再表示される
- [ ] `/board` にアクセスするとログインページにリダイレクトされる

---

### 6️⃣ セッション管理

#### セッション維持
- [ ] ページリロード後もログイン状態が維持される
- [ ] 別ページに遷移してもログイン状態が維持される
- [ ] 新しいタブでもログイン状態が共有される
- [ ] ブラウザを閉じて再度開いてもログイン状態が維持される

#### クッキー確認（開発者ツール）
- [ ] `authjs.session-token` クッキーが設定されている
- [ ] クッキーの有効期限が30日間になっている

---

### 7️⃣ ページ保護とリダイレクト

#### 未ログイン時のアクセス制限
- [ ] `/board` に直接アクセスすると `/auth/login` にリダイレクトされる
- [ ] `/profile` に直接アクセスすると `/auth/login` にリダイレクトされる
- [ ] `/settings` に直接アクセスすると `/auth/login` にリダイレクトされる
- [ ] リダイレクト時にURLに `callbackUrl` パラメータが含まれる

#### ログイン後のリダイレクト
- [ ] callbackUrl指定時、ログイン後に元のページに戻る
- [ ] callbackUrl未指定時、`/board` にリダイレクトされる

#### ログイン済みユーザーのアクセス制限
- [ ] ログイン済みで `/auth/login` にアクセスすると `/board` にリダイレクトされる
- [ ] ログイン済みで `/auth/register` にアクセスすると `/board` にリダイレクトされる

---

### 8️⃣ レスポンシブデザイン

#### モバイル表示（幅 < 640px）
- [ ] ログインフォームが適切に表示される
- [ ] ボタンがタップしやすいサイズになっている
- [ ] ヘッダーメニューが適切に表示される

#### タブレット/デスクトップ表示
- [ ] レイアウトが崩れていない
- [ ] 適切な余白が確保されている

---

### 9️⃣ パフォーマンスとUX

- [ ] ログイン処理中にローディング表示される
- [ ] ボタンが二重クリック防止されている
- [ ] エラーメッセージが適切なタイミングでクリアされる
- [ ] フォーカス管理が適切（Tab移動可能）
- [ ] パスワードの表示/非表示切り替えが即座に反応する

---

## 📊 テスト結果サマリー

### 合格項目数
- ログインページ表示: ___/8
- フォームバリデーション: ___/5
- 正常ログイン: ___/7
- エラーケース: ___/10
- ログアウト: ___/10
- セッション管理: ___/6
- ページ保護: ___/8
- レスポンシブ: ___/5
- パフォーマンス: ___/5

**合計**: ___/64 項目

### 不具合リスト
| No. | 項目 | 内容 | 優先度 |
|-----|------|------|--------|
| 1 | | | |
| 2 | | | |
| 3 | | | |

### コメント・備考
```
（テスト中に気づいたことをここに記載）




```

---

## 🎯 判定

- [ ] **合格** - すべての必須項目をクリア
- [ ] **条件付き合格** - 軽微な問題はあるが使用可能
- [ ] **不合格** - 重大な問題があり修正が必要

**署名**: ___________　**日付**: ___________